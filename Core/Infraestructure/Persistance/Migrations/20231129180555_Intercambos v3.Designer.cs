// <auto-generated />
using System;
using Core.Infraestructure.Persistance;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;

#nullable disable

namespace Core.Infraestructure.Persistance.Migrations
{
    [DbContext(typeof(ConvenioContext))]
    [Migration("20231129180555_Intercambos v3")]
    partial class Intercambosv3
    {
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "6.0.24")
                .HasAnnotation("Relational:MaxIdentifierLength", 64);

            modelBuilder.Entity("Core.Domain.Entities.Alerta", b =>
                {
                    b.Property<int>("Alerta_Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    b.Property<int?>("Contrato_Id")
                        .HasColumnType("int");

                    b.Property<bool?>("IsAdmin")
                        .IsRequired()
                        .HasColumnType("tinyint(1)");

                    b.Property<bool?>("IsInstitucion")
                        .IsRequired()
                        .HasColumnType("tinyint(1)");

                    b.HasKey("Alerta_Id");

                    b.HasIndex("Contrato_Id");

                    b.ToTable("Alertas");
                });

            modelBuilder.Entity("Core.Domain.Entities.Chat", b =>
                {
                    b.Property<int>("Chat_Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    b.Property<int>("Contrato_Id")
                        .HasColumnType("int");

                    b.Property<DateTime>("Fecha")
                        .HasColumnType("datetime(6)");

                    b.Property<string>("Mensaje")
                        .IsRequired()
                        .HasColumnType("longtext");

                    b.Property<int>("Usuario_Id")
                        .HasColumnType("int");

                    b.HasKey("Chat_Id");

                    b.HasIndex("Contrato_Id");

                    b.HasIndex("Usuario_Id");

                    b.ToTable("Chats");
                });

            modelBuilder.Entity("Core.Domain.Entities.Contrato", b =>
                {
                    b.Property<int>("Contrato_Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    b.Property<string>("Descripcion")
                        .IsRequired()
                        .HasColumnType("longtext");

                    b.Property<string>("Fase")
                        .IsRequired()
                        .HasColumnType("longtext");

                    b.Property<DateTime>("FechaCreacion")
                        .HasColumnType("datetime(6)");

                    b.Property<DateTime?>("FechaFinalizacion")
                        .HasColumnType("datetime(6)");

                    b.Property<string>("File")
                        .IsRequired()
                        .HasColumnType("longtext");

                    b.Property<int>("Institucion_Id")
                        .HasColumnType("int");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("longtext");

                    b.HasKey("Contrato_Id");

                    b.HasIndex("Institucion_Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("Contratos");
                });

            modelBuilder.Entity("Core.Domain.Entities.Institucion", b =>
                {
                    b.Property<int>("Institucion_Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    b.Property<string>("Ciudad")
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.Property<string>("Direccion")
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.Property<string>("Estado")
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.Property<string>("Identificacion")
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.Property<string>("Pais")
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.HasKey("Institucion_Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("Instituciones");
                });

            modelBuilder.Entity("Core.Domain.Entities.Intercambio", b =>
                {
                    b.Property<int>("Intercambio_Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    b.Property<int>("Contrato_Id")
                        .HasColumnType("int");

                    b.Property<bool>("Firma")
                        .HasColumnType("tinyint(1)");

                    b.Property<bool>("Revision")
                        .HasColumnType("tinyint(1)");

                    b.HasKey("Intercambio_Id");

                    b.HasIndex("Contrato_Id");

                    b.ToTable("Intercambios");
                });

            modelBuilder.Entity("Core.Domain.Entities.Log", b =>
                {
                    b.Property<int>("Log_Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    b.Property<string>("Action")
                        .IsRequired()
                        .HasColumnType("longtext");

                    b.Property<int?>("Contrato_Id")
                        .HasColumnType("int");

                    b.Property<DateTime?>("Fecha")
                        .IsRequired()
                        .HasColumnType("datetime(6)");

                    b.Property<int>("Usuario_Id")
                        .HasColumnType("int");

                    b.HasKey("Log_Id");

                    b.HasIndex("Contrato_Id");

                    b.HasIndex("Usuario_Id");

                    b.ToTable("Logs");
                });

            modelBuilder.Entity("Core.Domain.Entities.Rol", b =>
                {
                    b.Property<int>("Rol_Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    b.Property<string>("Descripcion")
                        .IsRequired()
                        .HasColumnType("longtext");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasColumnType("longtext");

                    b.HasKey("Rol_Id");

                    b.ToTable("Roles");
                });

            modelBuilder.Entity("Core.Domain.Entities.Usuario", b =>
                {
                    b.Property<int>("Usuario_Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    b.Property<bool?>("AcceptTerms")
                        .HasColumnType("tinyint(1)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("varchar(255)");

                    b.Property<int>("Institucion_Id")
                        .HasColumnType("int");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.Property<string>("Password")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("varchar(50)");

                    b.Property<int?>("Rol_Id")
                        .HasColumnType("int");

                    b.HasKey("Usuario_Id");

                    b.HasIndex("Email")
                        .IsUnique();

                    b.HasIndex("Institucion_Id");

                    b.HasIndex("Rol_Id");

                    b.ToTable("Usuarios");
                });

            modelBuilder.Entity("Core.Domain.Entities.Alerta", b =>
                {
                    b.HasOne("Core.Domain.Entities.Contrato", "Contratos")
                        .WithMany("Alerts")
                        .HasForeignKey("Contrato_Id")
                        .HasConstraintName("Alert_ibfk_1");

                    b.Navigation("Contratos");
                });

            modelBuilder.Entity("Core.Domain.Entities.Chat", b =>
                {
                    b.HasOne("Core.Domain.Entities.Contrato", "Contratos")
                        .WithMany("Chats")
                        .HasForeignKey("Contrato_Id")
                        .IsRequired()
                        .HasConstraintName("Chat_ibfk_1");

                    b.HasOne("Core.Domain.Entities.Usuario", "Usuarios")
                        .WithMany("Chats")
                        .HasForeignKey("Usuario_Id")
                        .IsRequired()
                        .HasConstraintName("Chat_ibfk_2");

                    b.Navigation("Contratos");

                    b.Navigation("Usuarios");
                });

            modelBuilder.Entity("Core.Domain.Entities.Contrato", b =>
                {
                    b.HasOne("Core.Domain.Entities.Institucion", "Instituciones")
                        .WithMany("Agreements")
                        .HasForeignKey("Institucion_Id")
                        .IsRequired()
                        .HasConstraintName("Agreement_ibfk_1");

                    b.Navigation("Instituciones");
                });

            modelBuilder.Entity("Core.Domain.Entities.Intercambio", b =>
                {
                    b.HasOne("Core.Domain.Entities.Contrato", "Contratos")
                        .WithMany("Intercambios")
                        .HasForeignKey("Contrato_Id")
                        .IsRequired()
                        .HasConstraintName("Intercambio_ibfk_1");

                    b.Navigation("Contratos");
                });

            modelBuilder.Entity("Core.Domain.Entities.Log", b =>
                {
                    b.HasOne("Core.Domain.Entities.Contrato", "Contratos")
                        .WithMany("Logs")
                        .HasForeignKey("Contrato_Id")
                        .HasConstraintName("Log_ibfk_1");

                    b.HasOne("Core.Domain.Entities.Usuario", "Usuarios")
                        .WithMany("Logs")
                        .HasForeignKey("Usuario_Id")
                        .IsRequired()
                        .HasConstraintName("Log_ibfk_2");

                    b.Navigation("Contratos");

                    b.Navigation("Usuarios");
                });

            modelBuilder.Entity("Core.Domain.Entities.Usuario", b =>
                {
                    b.HasOne("Core.Domain.Entities.Institucion", "Instituciones")
                        .WithMany("Users")
                        .HasForeignKey("Institucion_Id")
                        .IsRequired()
                        .HasConstraintName("User_institution_FK");

                    b.HasOne("Core.Domain.Entities.Rol", "Roles")
                        .WithMany("Users")
                        .HasForeignKey("Rol_Id")
                        .HasConstraintName("User_ibfk_1");

                    b.Navigation("Instituciones");

                    b.Navigation("Roles");
                });

            modelBuilder.Entity("Core.Domain.Entities.Contrato", b =>
                {
                    b.Navigation("Alerts");

                    b.Navigation("Chats");

                    b.Navigation("Intercambios");

                    b.Navigation("Logs");
                });

            modelBuilder.Entity("Core.Domain.Entities.Institucion", b =>
                {
                    b.Navigation("Agreements");

                    b.Navigation("Users");
                });

            modelBuilder.Entity("Core.Domain.Entities.Rol", b =>
                {
                    b.Navigation("Users");
                });

            modelBuilder.Entity("Core.Domain.Entities.Usuario", b =>
                {
                    b.Navigation("Chats");

                    b.Navigation("Logs");
                });
#pragma warning restore 612, 618
        }
    }
}
